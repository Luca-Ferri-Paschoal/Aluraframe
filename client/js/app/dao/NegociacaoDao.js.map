{"version":3,"file":"NegociacaoDao.js","names":["NegociacaoDao","connection","negociacao","Promise","resolve","reject","request","transaction","objectStore","add","atributos","onsuccess","event","onerror","console","log","target","error","cursor","openCursor","listaNegociacoes","atual","result","dado","value","push","Negociacao","data","quantidade","valor","continue","clear"],"sources":["../../app-es6/dao/NegociacaoDao.js"],"sourcesContent":["class NegociacaoDao {\r\n    #connectoin\r\n    #store;\r\n\r\n    constructor(connection) {\r\n        this.#connectoin = connection;\r\n        this.#store = 'negociacoes';;\r\n    }\r\n\r\n    adiciona(negociacao) {\r\n        return new Promise((resolve, reject) => {\r\n\r\n            const request = this.#connectoin\r\n            .transaction([this.#store], 'readwrite')\r\n            .objectStore(this.#store)\r\n            .add(negociacao.atributos);\r\n\r\n            request.onsuccess = event => {\r\n                resolve('Negociação adcionada com sucesso.');\r\n            };\r\n\r\n            request.onerror = event => {\r\n                console.log(event.target.error);\r\n                reject('Não foi possível adicionar a negociação.');\r\n            };\r\n        });\r\n    }\r\n\r\n    listaTodos() {\r\n        return new Promise((resolve, reject) => {\r\n            const cursor = this.#connectoin\r\n            .transaction([this.#store], 'readwrite')\r\n            .objectStore(this.#store)\r\n            .openCursor();\r\n\r\n            const listaNegociacoes = [];\r\n\r\n            cursor.onsuccess = event => {\r\n                const atual = event.target.result;\r\n\r\n                if (atual !== null) {\r\n                    const dado = atual.value;\r\n\r\n                    listaNegociacoes.push(new Negociacao(dado.data, dado.quantidade, dado.valor));\r\n\r\n                    atual.continue();\r\n                } else {\r\n                    resolve(listaNegociacoes);\r\n                }\r\n            };\r\n\r\n            cursor.onerror = event => {\r\n                console.log(event.target.error);\r\n                reject('Não foi possível listar as negociações.');\r\n            };\r\n        })\r\n    }\r\n\r\n    apagaTodos() {\r\n        return new Promise((resolve, reject) => {\r\n            const request = this.#connectoin\r\n            .transaction([this.#store], 'readwrite')\r\n            .objectStore(this.#store)\r\n            .clear();\r\n\r\n            request.onsuccess = event => {\r\n                resolve('Negociações apagadas com sucesso.');\r\n            };\r\n\r\n            request.onerror = event => {\r\n                console.log(event.target.error);\r\n                reject('Não foi possível apagar as negociações');\r\n            };\r\n        });\r\n    }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;IAAMA,a;EAIF,uBAAYC,UAAZ,EAAwB;IAAA;;IAAA;MAAA;MAAA;IAAA;;IAAA;MAAA;MAAA;IAAA;;IACpB,yCAAmBA,UAAnB;;IACA,oCAAc,aAAd;;IAA4B;EAC/B;;;;WAED,kBAASC,UAAT,EAAqB;MAAA;;MACjB,OAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;QAEpC,IAAMC,OAAO,GAAG,2BAAI,cAAJ,CACfC,WADe,CACH,uBAAC,KAAD,UADG,EACY,WADZ,EAEfC,WAFe,uBAEH,KAFG,WAGfC,GAHe,CAGXP,UAAU,CAACQ,SAHA,CAAhB;;QAKAJ,OAAO,CAACK,SAAR,GAAoB,UAAAC,KAAK,EAAI;UACzBR,OAAO,CAAC,mCAAD,CAAP;QACH,CAFD;;QAIAE,OAAO,CAACO,OAAR,GAAkB,UAAAD,KAAK,EAAI;UACvBE,OAAO,CAACC,GAAR,CAAYH,KAAK,CAACI,MAAN,CAAaC,KAAzB;UACAZ,MAAM,CAAC,0CAAD,CAAN;QACH,CAHD;MAIH,CAfM,CAAP;IAgBH;;;WAED,sBAAa;MAAA;;MACT,OAAO,IAAIF,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;QACpC,IAAMa,MAAM,GAAG,4BAAI,cAAJ,CACdX,WADc,CACF,uBAAC,MAAD,UADE,EACa,WADb,EAEdC,WAFc,uBAEF,MAFE,WAGdW,UAHc,EAAf;;QAKA,IAAMC,gBAAgB,GAAG,EAAzB;;QAEAF,MAAM,CAACP,SAAP,GAAmB,UAAAC,KAAK,EAAI;UACxB,IAAMS,KAAK,GAAGT,KAAK,CAACI,MAAN,CAAaM,MAA3B;;UAEA,IAAID,KAAK,KAAK,IAAd,EAAoB;YAChB,IAAME,IAAI,GAAGF,KAAK,CAACG,KAAnB;YAEAJ,gBAAgB,CAACK,IAAjB,CAAsB,IAAIC,UAAJ,CAAeH,IAAI,CAACI,IAApB,EAA0BJ,IAAI,CAACK,UAA/B,EAA2CL,IAAI,CAACM,KAAhD,CAAtB;YAEAR,KAAK,CAACS,QAAN;UACH,CAND,MAMO;YACH1B,OAAO,CAACgB,gBAAD,CAAP;UACH;QACJ,CAZD;;QAcAF,MAAM,CAACL,OAAP,GAAiB,UAAAD,KAAK,EAAI;UACtBE,OAAO,CAACC,GAAR,CAAYH,KAAK,CAACI,MAAN,CAAaC,KAAzB;UACAZ,MAAM,CAAC,yCAAD,CAAN;QACH,CAHD;MAIH,CA1BM,CAAP;IA2BH;;;WAED,sBAAa;MAAA;;MACT,OAAO,IAAIF,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;QACpC,IAAMC,OAAO,GAAG,4BAAI,cAAJ,CACfC,WADe,CACH,uBAAC,MAAD,UADG,EACY,WADZ,EAEfC,WAFe,uBAEH,MAFG,WAGfuB,KAHe,EAAhB;;QAKAzB,OAAO,CAACK,SAAR,GAAoB,UAAAC,KAAK,EAAI;UACzBR,OAAO,CAAC,mCAAD,CAAP;QACH,CAFD;;QAIAE,OAAO,CAACO,OAAR,GAAkB,UAAAD,KAAK,EAAI;UACvBE,OAAO,CAACC,GAAR,CAAYH,KAAK,CAACI,MAAN,CAAaC,KAAzB;UACAZ,MAAM,CAAC,wCAAD,CAAN;QACH,CAHD;MAIH,CAdM,CAAP;IAeH"}